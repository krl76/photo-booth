import pygame, time


WIDTH = 1280  # ширина
HEIGHT = 720  # высота
WHITE = (255, 255, 255)  # цвет
running = True  # флаг мониторящий закрытие экрана
pygame.init()  # запуск
clock = pygame.time.Clock()
screen = pygame.display.set_mode((WIDTH, HEIGHT))  # задать ширину высоту экрана
# screen = pygame.display.set_mode((WIDTH, HEIGHT), pygame.FULLSCREEN, pygame.NOFRAME)
# screen.fill(WHITE)  цвет экрана залить
# pygame.display.flip() перевернуть окно
pygame.display.set_caption("PhotoApp")  # название окна
pygame.display.set_icon(pygame.image.load('icon.png'))  # иконка приложения
number_of_screen = 1  # номер окна
press_button = False
pygame.time.set_timer(pygame.USEREVENT, 1000)
start = True
transfer = True

class Button:  # кнопка
    def __init__(self, width, height, inactive_color, active_color):
        self.width = width
        self.height = height
        self.color = (0, 0, 0)

    def draw(self, x, y, message, action=None):
        mouse = pygame.mouse.get_pos()
        click = pygame.mouse.get_pressed()


def print_text(message, x, y, font_size, font_color=(0, 0, 0), font_type='YakumoPreschoolHand.ttf'):
    # печать текста
    font_type = pygame.font.Font(font_type, font_size)
    text = font_type.render(message, True, font_color)
    screen.blit(text, (x, y))


def number_of_screen1():
    global start
    start = False
    print_text('Добро пожаловать в фото-будку!', 310, 250, 50)
    print_text('Нажмите на любую часть экрана, чтобы продолжить!', 100, 320, 50)
    pygame.display.update()
    while True:
        for event_number1 in pygame.event.get():
            if event_number1.type == pygame.MOUSEBUTTONDOWN:
                number_of_screen2(61)
                break


def number_of_screen2(counter):
    counter_photo = 6
    screen.fill(WHITE)
    screen.fill(pygame.Color('black'), pygame.Rect(350, 150, 600, 450))
    pygame.display.update()
    while True:
        for event_number2 in pygame.event.get():
            if event_number2.type == pygame.MOUSEBUTTONDOWN:
                print_text(str(counter_photo), 600, 650, 40)
                counter_photo -= 1
                counter = 61
                pygame.display.update()
            elif event_number2.type == pygame.USEREVENT and counter > 0:
                counter -= 1
                print_text(str(counter), 600, 80, 40)  # убрать, проверка
                pygame.display.update()
            if counter_photo == 0:
                number_of_screen3()
                break
            if counter == 0:
                number_of_screen1()
                break


def number_of_screen3():
    screen.fill(WHITE)
    screen.fill(pygame.Color('red'), pygame.Rect(350, 150, 600, 450))
    pygame.display.update()


while running:
    for event in pygame.event.get():
        # проверить закрытие окна
        if event.type == pygame.QUIT:
            running = False
        elif number_of_screen == 1:
            if transfer:
                screen.fill(WHITE)
                pygame.display.flip()
                transfer = False
            print_text('Добро пожаловать в фото-будку!', 310, 250, 50)
            print_text('Нажмите на любую часть экрана, чтобы продолжить!', 100, 320, 50)
            pygame.display.update()
            if event.type == pygame.MOUSEBUTTONDOWN:
                number_of_screen = 2
                new = True
        elif number_of_screen == 2:
            if new:
                counter = 61
                counter_photo = 6
                new = False
                flag_mouse2 = False
            screen.fill(WHITE)
            screen.fill(pygame.Color('black'), pygame.Rect(350, 150, 600, 450))
            pygame.display.update()
            if event.type == pygame.MOUSEBUTTONDOWN:
                flag_mouse2 = True
            if flag_mouse2:
                counter_photo -= 1
                print_text(str(counter_photo), 600, 650, 40)
                pygame.display.update()
                time.sleep(1)
            elif event.type == pygame.USEREVENT and counter > 0:
                counter -= 1
                print_text(str(counter), 600, 80, 40)  # убрать, проверка
                pygame.display.update()
                time.sleep(1)
            if counter_photo == 0:
                number_of_screen = 3
                flag_mouse2 = False
            if counter == 0:
                transfer = True
                number_of_screen = 1
        if number_of_screen == 3:
            screen.fill(WHITE)
            screen.fill(pygame.Color('red'), pygame.Rect(350, 150, 600, 450))
            pygame.display.update()
